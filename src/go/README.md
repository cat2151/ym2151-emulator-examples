# Goç‰ˆ YM2151ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿å®Ÿè£…

## çŠ¶æ…‹

ðŸš§ **æº–å‚™ä¸­** - Goç‰ˆã¯ç¾åœ¨æº–å‚™ä¸­ã§ã™ã€‚

Windowsç’°å¢ƒã§ã®Go + CGO + PortAudioã®çµ„ã¿åˆã‚ã›ã¯è¤‡é›‘ãªãŸã‚ã€
ã¾ãšã¯ **Pythonç‰ˆ** ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚

Pythonç‰ˆã¯ä»¥ä¸‹ã®ç†ç”±ã§æŽ¨å¥¨ã•ã‚Œã¾ã™ï¼š
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒç°¡å˜
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ã¿ã§å‹•ä½œ
- MSYS2ä¸è¦ï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼‰

è©³ç´°ã¯ [Pythonç‰ˆ README](../python/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ¦‚è¦ï¼ˆå‚è€ƒï¼‰
Goã‚’ä½¿ç”¨ã—ãŸYM2151ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®æœ€å°å®Ÿè£…ä¾‹ã§ã™ã€‚

ã“ã®å®Ÿè£…ã¯ **Nuked-OPM** ã‚’CGOçµŒç”±ã§ä½¿ç”¨ã—ã€**PortAudio** ã‚’é€šã˜ã¦440Hzã®AéŸ³ã‚’ç›´æŽ¥å†ç”Ÿã—ã¾ã™ã€‚

## ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **Nuked-OPM** (v0.9.2): ã‚µã‚¤ã‚¯ãƒ«ç²¾åº¦ã®é«˜ã„YM2151ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ (LGPL-2.1)
- **PortAudio**: ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªI/Oãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **CGO**: Goè¨€èªžã‹ã‚‰Cãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

## å¿…è¦ãªç’°å¢ƒï¼ˆWindowsï¼‰

- Windows 10/11 with WSL2
- Ubuntu 22.04 LTS (WSL2å†…)
- Go 1.21ä»¥é™
- Git

**æ³¨æ„**: MSYS2/MinGWã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚ç†ç”±ã¯ã€MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ DLLã¸ã®ä¾å­˜ã‚’é¿ã‘ã€Windowsç’°å¢ƒã®DLLæ±šæŸ“ã‚’é˜²ããŸã‚ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒªã‚·ãƒ¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ DLLã¸ã®å‹•çš„ãƒªãƒ³ã‚¯ã‚’åŽ³é‡ã«ç¦æ­¢**ã—ã¦ã„ã¾ã™ã€‚

ç†ç”±ï¼š
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«MSYS2/MinGWç’°å¢ƒã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å¼·åˆ¶ã™ã‚‹
- Windowsç’°å¢ƒå…¨ä½“ãŒMinGW DLLã§æ±šæŸ“ã•ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒçŸ¥ã‚‰ãšã«MinGWä¾å­˜ã®ã‚¢ãƒ—ãƒªã‚’ä½œæˆãƒ»é…å¸ƒã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¿·æƒ‘ã‚’ã‹ã‘ã‚‹é€£éŽ–çš„ãƒˆãƒ©ãƒ–ãƒ«ãŒç™ºç”Ÿã™ã‚‹

**è¨±å¯ã•ã‚Œã‚‹ä¾å­˜é–¢ä¿‚ï¼š**
- âœ… PortAudio DLLã¸ã®å‹•çš„ãƒªãƒ³ã‚¯ï¼ˆéŸ³å£°å‡ºåŠ›ã«å¿…è¦ãªãŸã‚ï¼‰
- âœ… MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®é™çš„ãƒªãƒ³ã‚¯ï¼ˆDLLã‚’å¿…è¦ã¨ã—ãªã„ãŸã‚ï¼‰

**ç¦æ­¢ã•ã‚Œã‚‹ä¾å­˜é–¢ä¿‚ï¼š**
- âŒ MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ DLLã¸ã®å‹•çš„ãƒªãƒ³ã‚¯

## å®Ÿè¡Œæ™‚ã®ä¾å­˜é–¢ä¿‚

**âœ… DLLã«ä¸€åˆ‡ä¾å­˜ã—ãªã„å®Œå…¨ãªã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«**

- PortAudioãŒé™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹
- MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆlibgccã€libstdc++ï¼‰ã‚‚é™çš„ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹
- Windowsæ¨™æº–ã®ã‚·ã‚¹ãƒ†ãƒ DLLï¼ˆkernel32.dllç­‰ï¼‰ã®ã¿ã«ä¾å­˜
- MinGWç’°å¢ƒãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„Windows PCã§ã‚‚å‹•ä½œ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿè¡Œï¼ˆWSL2ï¼‰

#### 0. åˆå›žã®ã¿ï¼šã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³å¾Œã€ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–
git submodule update --init --recursive
```

#### 1. WSL2ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Windows 10/11ã§WSL2ãŒæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼š

1. PowerShellã‚’ç®¡ç†è€…æ¨©é™ã§é–‹ã
2. ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š
```powershell
wsl --install -d Ubuntu-22.04
```
3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†å¾Œã€Ubuntuã‚’èµ·å‹•ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š

#### 2. WSL2å†…ã§å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

WSL2ã®Ubuntuã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
# ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°
sudo apt update && sudo apt upgrade -y

# ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y build-essential git

# MinGWï¼ˆWindowsç”¨ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y gcc-mingw-w64-x86-64 g++-mingw-w64-x86-64

# PortAudioé–‹ç™ºãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y libportaudio2 portaudio19-dev

# pkg-configã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y pkg-config

# Goã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆï¼‰
wget https://go.dev/dl/go1.21.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.0.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc
go version
```

#### 3. PortAudioã®Windowsç”¨é™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰

WSL2å†…ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
mkdir -p ~/portaudio-mingw
cd ~/portaudio-mingw

# PortAudioã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
wget http://files.portaudio.com/archives/pa_stable_v190700_20210406.tgz
tar xzf pa_stable_v190700_20210406.tgz
cd portaudio

# Windowsç”¨ã«ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ï¼ˆé™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
./configure --host=x86_64-w64-mingw32 --enable-static --disable-shared \
  --with-winapi=wasapi,directsound,wmme
make

# ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é…ç½®
sudo mkdir -p /usr/x86_64-w64-mingw32/lib
sudo mkdir -p /usr/x86_64-w64-mingw32/include
sudo cp lib/.libs/libportaudio.a /usr/x86_64-w64-mingw32/lib/
sudo cp include/portaudio.h /usr/x86_64-w64-mingw32/include/

# pkg-configè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
sudo mkdir -p /usr/x86_64-w64-mingw32/lib/pkgconfig
sudo tee /usr/x86_64-w64-mingw32/lib/pkgconfig/portaudio-2.0.pc > /dev/null << EOF
prefix=/usr/x86_64-w64-mingw32
exec_prefix=\${prefix}
libdir=\${exec_prefix}/lib
includedir=\${prefix}/include

Name: PortAudio
Description: Portable audio I/O library
Version: 19.7.0
Libs: -L\${libdir} -lportaudio -lwinmm -lole32 -luuid -lksuser
Cflags: -I\${includedir}
EOF
```

#### 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆã¾ã ã®å ´åˆï¼‰
cd ~
git clone https://github.com/cat2151/ym2151-emulator-examples.git
cd ym2151-emulator-examples
git submodule update --init --recursive

# Goç‰ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
cd src/go
```

#### 5. Windowsç”¨å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ“ãƒ«ãƒ‰

```bash
# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
export GOOS=windows
export GOARCH=amd64
export CGO_ENABLED=1
export CC=x86_64-w64-mingw32-gcc
export CXX=x86_64-w64-mingw32-g++
export PKG_CONFIG_PATH=/usr/x86_64-w64-mingw32/lib/pkgconfig

# ãƒ“ãƒ«ãƒ‰ï¼ˆé™çš„ãƒªãƒ³ã‚¯ï¼‰
go build -ldflags="-s -w -extldflags '-static-libgcc -static-libstdc++'" -o ym2151-example.exe main.go
```

ã“ã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•ã§ã¯ï¼š
- MinGWãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆlibgccã€libstdc++ï¼‰ãŒé™çš„ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹
- PortAudioã‚‚é™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹
- ç”Ÿæˆã•ã‚Œã‚‹å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯**DLLã«ä¸€åˆ‡ä¾å­˜ã—ãªã„**å®Œå…¨ãªã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«

#### 6. Windowså´ã§ãƒ“ãƒ«ãƒ‰ã—ãŸãƒã‚¤ãƒŠãƒªã‚’å®Ÿè¡Œ

WSL2å†…ã‹ã‚‰Windowsã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã‚³ãƒ”ãƒ¼ï¼š

```bash
# Windowså´ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ã‚³ãƒ”ãƒ¼
cp ym2151-example.exe /mnt/c/Users/$USER/Documents/

# ã¾ãŸã¯ã€Windowså´ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«é…ç½®
cp ym2151-example.exe /mnt/c/Users/$USER/Desktop/
```

Windowsã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‹ã‚‰ `ym2151-example.exe` ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯PowerShellã§å®Ÿè¡Œï¼š

```powershell
cd $HOME\Documents
.\ym2151-example.exe
```

**âœ… WSL2ã§ãƒ“ãƒ«ãƒ‰ã—ãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ©ç‚¹ï¼š**
- DLLã«ä¸€åˆ‡ä¾å­˜ã—ãªã„å®Œå…¨ãªã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
- MinGWç’°å¢ƒãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„Windows PCã§ã‚‚å‹•ä½œ
- é…å¸ƒãŒå®¹æ˜“ï¼ˆ.exeãƒ•ã‚¡ã‚¤ãƒ«1ã¤ã ã‘ã§å®Œçµï¼‰

## å‡ºåŠ›
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°å‡ºåŠ›**: PortAudioã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã‹ã‚‰ç›´æŽ¥éŸ³ã‚’å†ç”Ÿ
- **48kHz, ã‚¹ãƒ†ãƒ¬ã‚ª**: é«˜å“è³ªãªã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

## å®Ÿè£…ã®ç‰¹å¾´

### YM2151 ãƒ¬ã‚¸ã‚¹ã‚¿è¨­å®š
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä»¥ä¸‹ã®YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ã‚’è¨­å®šã—ã¦éŸ³ã‚’ç”Ÿæˆã—ã¾ã™ï¼š

1. **ã‚­ãƒ¼ã‚³ãƒ¼ãƒ‰ (KC)**: éŸ³ç¨‹ã®è¨­å®š
2. **ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: FMéŸ³æºã®å¤‰èª¿çµŒè·¯ (Algorithm 7ã‚’ä½¿ç”¨)
3. **ã‚ªãƒšãƒ¬ãƒ¼ã‚¿è¨­å®š**: 
   - Total Level (TL): éŸ³é‡
   - Attack Rate (AR): ç«‹ã¡ä¸ŠãŒã‚Šé€Ÿåº¦
   - Decay/Sustain/Release: ã‚¨ãƒ³ãƒ™ãƒ­ãƒ¼ãƒ—è¨­å®š

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªç”Ÿæˆ
- PortAudioã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨
- ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º: 512ãƒ•ãƒ¬ãƒ¼ãƒ 
- YM2151ãƒãƒƒãƒ—ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¯ãƒ­ãƒƒã‚¯ï¼ˆã‚µãƒ³ãƒ—ãƒ«ã‚ãŸã‚Šç´„75ã‚µã‚¤ã‚¯ãƒ«ï¼‰

### ã‚¯ãƒ­ãƒƒã‚¯ç²¾åº¦
- YM2151ã¯3.58MHzã§å‹•ä½œ
- 48kHzå‡ºåŠ›ã®ãŸã‚ã€ã‚µãƒ³ãƒ—ãƒ«ã‚ãŸã‚Šç´„75å›žã®ã‚¯ãƒ­ãƒƒã‚¯ã‚’å®Ÿè¡Œ
- ã‚µã‚¤ã‚¯ãƒ«ç²¾åº¦ã®é«˜ã„ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
```
src/go/
â”œâ”€â”€ main.go           # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ  (CGO + Nuked-OPM + PortAudio)
â”œâ”€â”€ nuked-opm-src/    # Nuked-OPMã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ (git submodule)
â”‚   â”œâ”€â”€ opm.c
â”‚   â””â”€â”€ opm.h
â”œâ”€â”€ go.mod            # Goãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”œâ”€â”€ go.sum            # ä¾å­˜é–¢ä¿‚ã®ãƒã‚§ãƒƒã‚¯ã‚µãƒ 
â”œâ”€â”€ .gitignore        # Gitã®é™¤å¤–è¨­å®š
â””â”€â”€ README.md         # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
- **ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: MIT License
- **Nuked-OPM**: LGPL-2.1 (å•†ç”¨åˆ©ç”¨æ™‚ã¯æ³¨æ„ãŒå¿…è¦)
- **PortAudio**: MIT License

## å‚è€ƒãƒªãƒ³ã‚¯
- [Nuked-OPM](https://github.com/nukeykt/Nuked-OPM)
- [PortAudio](http://www.portaudio.com/)
- [gordonklaus/portaudio (Go bindings)](https://github.com/gordonklaus/portaudio)
- [YM2151 Wikipedia](https://en.wikipedia.org/wiki/Yamaha_YM2151)
- [å®Ÿè£…è¨ˆç”»æ›¸](../../IMPLEMENTATION_PLAN.md#2-goç‰ˆ-)

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### WSL2ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¤±æ•—ã™ã‚‹
WSL2ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™ã€‚PowerShellã‚’ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ã¾ãŸã€Windows 10ã®å ´åˆã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³2004ä»¥é™ãŒå¿…è¦ã§ã™ã€‚Windows Updateã§æœ€æ–°ç‰ˆã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

### `gcc: command not found` ã¾ãŸã¯ `x86_64-w64-mingw32-gcc: command not found`
MinGWã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼š
```bash
# WSL2ã®Ubuntuã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
sudo apt install -y gcc-mingw-w64-x86-64 g++-mingw-w64-x86-64
```

### `portaudio.h: No such file or directory`
PortAudioãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã¦ã„ãªã„ã‹ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å ´æ‰€ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚
ã€Œ3. PortAudioã®Windowsç”¨é™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ‰‹é †ã‚’å†åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### `CGO_ENABLED=1` ãŒå¿…è¦
Goã§CGOã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€æ˜Žç¤ºçš„ã«æœ‰åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å¿…ãš `CGO_ENABLED=1` ã‚’è¨­å®šã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¦ãã ã•ã„ã€‚

### `Error opening audio stream: no default output device`
Windowså´ã§ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒã‚¤ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
- ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒã‚¤ã‚¹ãŒæ­£ã—ãæŽ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹
- Windowsã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®šãŒæ­£ã—ã„ã‹
- ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒã‚¤ã‚¹ã‚’å æœ‰ã—ã¦ã„ãªã„ã‹

### ãƒ“ãƒ«ãƒ‰ã—ãŸexeãƒ•ã‚¡ã‚¤ãƒ«ãŒå‹•ä½œã—ãªã„
WSL2ã§ãƒ“ãƒ«ãƒ‰ã—ãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Windowså´ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
WSL2ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§ã¯å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚

å¿…ãš `/mnt/c/Users/$USER/Documents/` ãªã©Windowså´ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¦ã‹ã‚‰ã€
Windowsã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã¾ãŸã¯PowerShellã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### ãƒ“ãƒ«ãƒ‰è¨­å®šã®ç¢ºèªæ–¹æ³•

å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã®DLLã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã«ã¯ã€WSL2ã‚·ã‚§ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
```bash
x86_64-w64-mingw32-objdump -p ym2151-example.exe | grep "DLL Name"
```

**æŽ¨å¥¨ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ã‚‹å ´åˆã®å‡ºåŠ›ä¾‹**:
```
DLL Name: KERNEL32.dll
DLL Name: msvcrt.dll
DLL Name: ADVAPI32.dll
...
ï¼ˆlibportaudio-2.dllã€libgcc_s_seh-1.dllã€libstdc++-6.dll ãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼‰
```

WSL2ã§ãƒ“ãƒ«ãƒ‰ã—ãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€PortAudioã‚‚é™çš„ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹ãŸã‚ã€DLLã«ä¸€åˆ‡ä¾å­˜ã—ã¾ã›ã‚“ã€‚

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
âœ… **å®Ÿè£…å®Œäº†** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå†ç”ŸãŒå‹•ä½œã—ã¦ã„ã¾ã™ã€‚
